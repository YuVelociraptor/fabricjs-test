<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>fabricjs test</title>
    <script src="https://cdn.jsdelivr.net/npm/fabric@latest/dist/index.min.js"></script>
    <link rel="stylesheet" href="style.css" type="text/css">
</head>

<body>


<div id="canvas-container" class="layer-wrap" style="position: relative; width: 500px; height: 500px;">
    <canvas id="canvas0" width="500" height="500" style="position: absolute; left: 0; top: 0; z-index: 1;"></canvas>
    <canvas id="canvas1" width="500" height="500" style="position: absolute; left: 0; top: 0; z-index: 2;"></canvas>
</div>

<script>
    const canvas0 = new fabric.Canvas('canvas0');

    for(let i = 0; i < 10; i++) {
        const r = new fabric.Rect({
            left: 10 + i * 10,
            top: 20 + i * 10,
            fill: '#ffddff',
            width: 10,
            height: 10,
            angle: 0,
        });
        canvas0.add(r);

    }

    // Fabric.js キャンバスの初期化
    const canvas1 = new fabric.Canvas('canvas1');

    // イベントリスナー
    canvas1.on('mouse:down', function (event) {
        console.log('Canvas clicked at', event.pointer);
    });


    // 付箋のテキスト
    const noteText = new fabric.Textbox('This is a sticky note!', {
        left: 160,
        top: 160,
        fontSize: 18,
        width: 180,
        fill: 'black',
        backgroundColor: 'yellow',
        editable: true,
    });



    // キャンバスに追加
    canvas1.add(noteText);

    // 描画更新
    canvas1.renderAll();

    // イベントリスナー: サイズや位置を変更した後に更新
    canvas1.on('object:modified', (event) => {
        console.log('Object modified:', event.target);
    });
</script>


</body>
</html>